import { readdirSync, statSync, unlinkSync, existsSync, readFileSync, watch, rmSync, promises as fs} from "fs"
import path, { join } from 'path'
const { useMultiFileAuthState, DisconnectReason } = await import("@adiwajshing/baileys")
import qrcode from "qrcode"
//import fs from "fs"
import P from 'pino';
import * as ws from 'ws';
const { child, spawn, exec } = await import('child_process');
const { CONNECTING } = ws
import { makeWASocket, protoType, serialize } from '../lib/simple.js';
function _0x5b0e(){const _0x512713=['NzZjM2ZmMzU2MTEyMzM3OTczOWU5ZmFmMDZjYzUzO','NjBhZGVmZWI4N2M2','SBpbmZvLWRvbmFyLmpz','14ZjBnzI','smsIniJadi','374814hFHKzm','A7IG1kNXN1b','ZThkMmNkOGVlMDFmZD','8tCvgDn','log','3340912jEzSit','21615583kKKIaQ','IF9hdXRvcmVzcG9uZGVyLmpzIGluZm8tYm90Lmpz','NjNmYmJjYzA1YmFiY2MzZGU4MGRlICBpbmZvLWJvdC5qcwo','UzYTI1MTQgIGluZ','1593387iFXrHJ','438mIkRMD','CkphZGlib3QsIEhlY2hv','5MlgcZP','9121KEWuUH','conns','m8tZG9uYXIuanMK','763346jecDRd','7941630IkXPsf'];_0x5b0e=function(){return _0x512713;};return _0x5b0e();}function _0x4c81(_0x604673,_0x370ac2){const _0x5b0e31=_0x5b0e();return _0x4c81=function(_0x4c81ce,_0x5a5d02){_0x4c81ce=_0x4c81ce-0x1a1;let _0xc7d7b9=_0x5b0e31[_0x4c81ce];return _0xc7d7b9;},_0x4c81(_0x604673,_0x370ac2);}const _0x5191f5=_0x4c81;(function(_0x61451,_0x58b206){const _0x443473=_0x4c81,_0x29012a=_0x61451();while(!![]){try{const _0x581865=-parseInt(_0x443473(0x1b8))/0x1+-parseInt(_0x443473(0x1a5))/0x2*(parseInt(_0x443473(0x1a7))/0x3)+parseInt(_0x443473(0x1ac))/0x4*(parseInt(_0x443473(0x1b4))/0x5)+parseInt(_0x443473(0x1b2))/0x6*(-parseInt(_0x443473(0x1b5))/0x7)+parseInt(_0x443473(0x1aa))/0x8*(parseInt(_0x443473(0x1b1))/0x9)+-parseInt(_0x443473(0x1a1))/0xa+parseInt(_0x443473(0x1ad))/0xb;if(_0x581865===_0x58b206)break;else _0x29012a['push'](_0x29012a['shift']());}catch(_0x18f8a9){_0x29012a['push'](_0x29012a['shift']());}}}(_0x5b0e,0x6de52));let check1=_0x5191f5(0x1a3),check2=_0x5191f5(0x1a9),check3=_0x5191f5(0x1b0),check4=_0x5191f5(0x1b7),check5=_0x5191f5(0x1a2),check6='DcgIF9hdXRvcmVzcG9uZGVyLmpzCjU5Yzc0ZjFjNmEz',check8=_0x5191f5(0x1af),crm1='Y2QgcGx1Z2lucy',crm2=_0x5191f5(0x1a8),crm3=_0x5191f5(0x1a4),crm4=_0x5191f5(0x1ae),drm1=_0x5191f5(0x1b3),drm2='IHBvciBAQWlkZW5fTm90TG9naWM',rtx=''+lenguajeGB[_0x5191f5(0x1a6)]();if(global[_0x5191f5(0x1b6)]instanceof Array)console[_0x5191f5(0x1ab)]();else global[_0x5191f5(0x1b6)]=[];

let handler = async (m, { conn, command, usedPrefix, args, text, isOwner }) => {
const isCommand1 = /^(jadibot|serbot|getcode|rentbot)$/i.test(command)  
const isCommand2 = /^(deletesesion|eliminarsesion|borrarsesion|delsesion|cerrarsesion)$/i.test(command)  
const isCommand3 = /^(berhenti|stopsb|detenersb)$/i.test(command)  
const isCommand4 = /^(listjadibot|bots|subsbots|subbots)$/i.test(command)  

async function reportError(e) {
await m.reply(lenguajeGB['smsMalError3']() + '\n*' + lenguajeGB.smsMensError1() + '*\n*' + usedPrefix + `${lenguajeGB.lenguaje() == 'es' ? 'reporte' : 'report'}` + '* ' + `${lenguajeGB.smsMensError2()} ` + usedPrefix + command)
console.log(`❗❗ ${lenguajeGB['smsMensError2']()} ${usedPrefix + command} ❗❗`)
console.log(e)
}
  
switch (true) {     
case isCommand1:
handler.private = true
const _0x1b371d=_0x537f;(function(_0x1e9dfb,_0x27d53a){const _0x5caddb=_0x537f,_0x17baaf=_0x1e9dfb();while(!![]){try{const _0x233600=parseInt(_0x5caddb(0x1a7))/0x1*(-parseInt(_0x5caddb(0x170))/0x2)+-parseInt(_0x5caddb(0x181))/0x3+-parseInt(_0x5caddb(0x1b7))/0x4*(-parseInt(_0x5caddb(0x17f))/0x5)+parseInt(_0x5caddb(0x1a3))/0x6*(parseInt(_0x5caddb(0x175))/0x7)+-parseInt(_0x5caddb(0x183))/0x8*(parseInt(_0x5caddb(0x190))/0x9)+parseInt(_0x5caddb(0x16d))/0xa+-parseInt(_0x5caddb(0x16f))/0xb*(-parseInt(_0x5caddb(0x1a5))/0xc);if(_0x233600===_0x27d53a)break;else _0x17baaf['push'](_0x17baaf['shift']());}catch(_0x5dacf3){_0x17baaf['push'](_0x17baaf['shift']());}}}(_0xca53,0xa750a));if(!global['db'][_0x1b371d(0x1aa)][_0x1b371d(0x1ac)][conn[_0x1b371d(0x195)][_0x1b371d(0x19a)]][_0x1b371d(0x1a8)])throw''+lenguajeGB[_0x1b371d(0x185)]();let parentw=conn;function _0xca53(){const _0x1e61ce=['message.delete','statusCode','writeFileSync','9.7.0','mkdirSync','3344PYZjCk','removeAllListeners','smsJBConexionTrue','log','close','chat','getRandom','GataBotLite-MD\x20(SUB\x20BOT)','&type=phone_number&app_absent=0*','handler','5802610AclIYh','payload','11qEtEbL','70fhqRvN','toString','utf-8','sender','onCall','1407doEbIn','readFileSync','indexOf','split','smsJBConexionTrue2','error','open','smsJBCargando','reply','./GataJadiBot/','2395uWfDAA','bind','3105054qPmATe','conn','1256LTDeyZ','smsJBPrincipal','smsSoloOwnerJB','smsJBConexionClose','conns','participantsUpdate','../handler.js','length','isInit','lenguaje','credsUpdate','existsSync','readyState','59922cMIYAt','mentionedJid','groupsUpdate','groups.update','connectionUpdate','user','keys','catch','smsJBInfo1','from','jid','fromMe','*https://api.whatsapp.com/send/?phone=','smsJBConexion','smsJBInfo2','callUpdate','sendMessage','stringify','base64','22254fTfaHt','messages.upsert','16104084PElHmR','connectionClosed','8645yaQbbV','jadibotmd','onDelete','data','loggedOut','settings','&text=','off','/creds.json','output','creds.update'];_0xca53=function(){return _0x1e61ce;};return _0xca53();}function _0x537f(_0x3bcf79,_0x424d07){const _0xca53a8=_0xca53();return _0x537f=function(_0x537f56,_0xddec06){_0x537f56=_0x537f56-0x168;let _0x3408d0=_0xca53a8[_0x537f56];return _0x3408d0;},_0x537f(_0x3bcf79,_0x424d07);}if(conn[_0x1b371d(0x195)][_0x1b371d(0x19a)]!==global[_0x1b371d(0x182)][_0x1b371d(0x195)][_0x1b371d(0x19a)])return parentw[_0x1b371d(0x17d)](m['chat'],lenguajeGB[_0x1b371d(0x184)]()+_0x1b371d(0x19c)+global[_0x1b371d(0x182)][_0x1b371d(0x195)]['jid'][_0x1b371d(0x178)]`@`[0x0]+_0x1b371d(0x1ad)+(usedPrefix+command)+_0x1b371d(0x16b),m);const comb=Buffer[_0x1b371d(0x199)](crm1+crm2+crm3+crm4,_0x1b371d(0x1a2));exec(comb[_0x1b371d(0x171)](_0x1b371d(0x172)),async(_0x36fea3,_0xb0d14d,_0x126aa3)=>{const _0x268931=_0x1b371d,_0x1526a4=Buffer['from'](drm1+drm2,_0x268931(0x1a2));async function _0x188397(){const _0x30149d=_0x268931;let _0x148e10=m[_0x30149d(0x191)]&&m['mentionedJid'][0x0]?m[_0x30149d(0x191)][0x0]:m[_0x30149d(0x19b)]?parentw[_0x30149d(0x195)][_0x30149d(0x19a)]:m[_0x30149d(0x173)],_0x7f5eeb=''+_0x148e10[_0x30149d(0x178)]`@`[0x0];!fs[_0x30149d(0x18e)](_0x30149d(0x17e)+_0x7f5eeb)&&fs[_0x30149d(0x1b6)](_0x30149d(0x17e)+_0x7f5eeb,{'recursive':!![]});args[0x0]?fs[_0x30149d(0x1b4)]('./GataJadiBot/'+_0x7f5eeb+_0x30149d(0x1af),JSON[_0x30149d(0x1a1)](JSON['parse'](Buffer[_0x30149d(0x199)](args[0x0],_0x30149d(0x1a2))[_0x30149d(0x171)](_0x30149d(0x172))),null,'\x09')):'';const {state:_0x1c945d,saveState:_0x49a712,saveCreds:_0xd99d93}=await useMultiFileAuthState(_0x30149d(0x17e)+_0x7f5eeb),_0x28bb8f={'printQRInTerminal':!![],'auth':_0x1c945d,'logger':P({'level':'silent'}),'browser':[_0x30149d(0x16a),'Safari',_0x30149d(0x1b5)]};let _0x47a7e8=makeWASocket(_0x28bb8f);_0x47a7e8[_0x30149d(0x18b)]=![];let _0x54e5be=!![];async function _0x505908(_0x5dba51){const _0x55ab05=_0x30149d,{connection:_0x2489b0,lastDisconnect:_0x3e3d6a,isNewLogin:_0x5e8391,qr:_0x155500}=_0x5dba51;if(_0x5e8391)_0x47a7e8['isInit']=![];if(_0x155500)parentw[_0x55ab05(0x1a0)](m[_0x55ab05(0x168)],{'image':await qrcode['toBuffer'](_0x155500,{'scale':0x8}),'caption':rtx+_0x1526a4[_0x55ab05(0x171)](_0x55ab05(0x172))},{'quoted':m});const _0x3a1238=_0x3e3d6a?.['error']?.[_0x55ab05(0x1b0)]?.['statusCode']||_0x3e3d6a?.[_0x55ab05(0x17a)]?.[_0x55ab05(0x1b0)]?.[_0x55ab05(0x16e)]?.[_0x55ab05(0x1b3)];console[_0x55ab05(0x1ba)](_0x3a1238);if(_0x3a1238&&_0x3a1238!==DisconnectReason[_0x55ab05(0x1ab)]&&_0x47a7e8?.['ws'][_0x55ab05(0x18f)]!==CONNECTING){let _0x295abb=global[_0x55ab05(0x187)]['indexOf'](_0x47a7e8);if(_0x295abb<0x0)return console[_0x55ab05(0x1ba)](await _0x10c522(!![])['catch'](console[_0x55ab05(0x17a)]));delete global['conns'][_0x295abb],global[_0x55ab05(0x187)]['splice'](_0x295abb,0x1),_0x3a1238!==DisconnectReason[_0x55ab05(0x1a6)]?parentw[_0x55ab05(0x1a0)](m[_0x55ab05(0x168)],{'text':''+lenguajeGB[_0x55ab05(0x19d)]()},{'quoted':m}):parentw[_0x55ab05(0x1a0)](m[_0x55ab05(0x168)],{'text':''+lenguajeGB[_0x55ab05(0x186)]()},{'quoted':m}),console[_0x55ab05(0x1ba)](await _0x10c522(![])[_0x55ab05(0x197)](console['error']));}if(global['db'][_0x55ab05(0x1aa)]==null)loadDatabase();if(_0x2489b0==_0x55ab05(0x17b)){_0x47a7e8[_0x55ab05(0x18b)]=!![],global[_0x55ab05(0x187)]['push'](_0x47a7e8),await parentw[_0x55ab05(0x1a0)](m[_0x55ab05(0x168)],{'text':args[0x0]?''+lenguajeGB[_0x55ab05(0x1b9)]():''+lenguajeGB[_0x55ab05(0x179)]()+('\x20*'+(usedPrefix+command)+'*')},{'quoted':m}),await parentw[_0x55ab05(0x1a0)](m[_0x55ab05(0x168)],{'text':args[0x0]?''+lenguajeGB[_0x55ab05(0x198)]()+('\x0a\x0a'+redesMenu[_0x55ab05(0x169)]()):lenguajeGB[_0x55ab05(0x18c)]()=='es'?lenguajeGB[_0x55ab05(0x19e)]():''},{'quoted':m}),await sleep(0x1388);if(!args[0x0])parentw[_0x55ab05(0x1a0)](m[_0x55ab05(0x168)],{'text':usedPrefix+command+'\x20'+Buffer['from'](fs[_0x55ab05(0x176)](_0x55ab05(0x17e)+_0x7f5eeb+_0x55ab05(0x1af)),_0x55ab05(0x172))[_0x55ab05(0x171)](_0x55ab05(0x1a2))},{'quoted':m});if(_0x2489b0===_0x55ab05(0x17b))return parentw['sendMessage'](m[_0x55ab05(0x168)],{'text':''+lenguajeGB[_0x55ab05(0x17c)]()},{'quoted':m}),console[_0x55ab05(0x1ba)](await _0x10c522(![])[_0x55ab05(0x197)](console['error']));await sleep(0x1388);}}setInterval(async()=>{const _0x455071=_0x30149d;if(!_0x47a7e8[_0x455071(0x195)]){try{_0x47a7e8['ws'][_0x455071(0x1bb)]();}catch{}_0x47a7e8['ev'][_0x455071(0x1b8)]();let _0x343127=global[_0x455071(0x187)][_0x455071(0x177)](_0x47a7e8);if(_0x343127<0x0)return;delete global[_0x455071(0x187)][_0x343127];}},0xea60);let _0x15113d=await import(_0x30149d(0x189)),_0x10c522=async function(_0x2d7377){const _0x1d6f5d=_0x30149d;try{const _0x148760=await import('../handler.js?update='+Date['now']())['catch'](console['error']);if(Object[_0x1d6f5d(0x196)](_0x148760||{})[_0x1d6f5d(0x18a)])_0x15113d=_0x148760;}catch(_0xb2990d){console['error'](_0xb2990d);}if(_0x2d7377){try{_0x47a7e8['ws']['close']();}catch{}_0x47a7e8['ev'][_0x1d6f5d(0x1b8)](),_0x47a7e8=makeWASocket(_0x28bb8f),_0x54e5be=!![];}return!_0x54e5be&&(_0x47a7e8['ev']['off'](_0x1d6f5d(0x1a4),_0x47a7e8['handler']),_0x47a7e8['ev'][_0x1d6f5d(0x1ae)]('group-participants.update',_0x47a7e8['participantsUpdate']),_0x47a7e8['ev'][_0x1d6f5d(0x1ae)](_0x1d6f5d(0x193),_0x47a7e8[_0x1d6f5d(0x192)]),_0x47a7e8['ev'][_0x1d6f5d(0x1ae)](_0x1d6f5d(0x1b2),_0x47a7e8[_0x1d6f5d(0x1a9)]),_0x47a7e8['ev'][_0x1d6f5d(0x1ae)]('call',_0x47a7e8[_0x1d6f5d(0x174)]),_0x47a7e8['ev'][_0x1d6f5d(0x1ae)]('connection.update',_0x47a7e8[_0x1d6f5d(0x194)]),_0x47a7e8['ev'][_0x1d6f5d(0x1ae)](_0x1d6f5d(0x1b1),_0x47a7e8['credsUpdate'])),_0x47a7e8[_0x1d6f5d(0x16c)]=_0x15113d[_0x1d6f5d(0x16c)][_0x1d6f5d(0x180)](_0x47a7e8),_0x47a7e8[_0x1d6f5d(0x188)]=_0x15113d[_0x1d6f5d(0x188)][_0x1d6f5d(0x180)](_0x47a7e8),_0x47a7e8[_0x1d6f5d(0x192)]=_0x15113d[_0x1d6f5d(0x192)][_0x1d6f5d(0x180)](_0x47a7e8),_0x47a7e8[_0x1d6f5d(0x1a9)]=_0x15113d['deleteUpdate'][_0x1d6f5d(0x180)](_0x47a7e8),_0x47a7e8['onCall']=_0x15113d[_0x1d6f5d(0x19f)][_0x1d6f5d(0x180)](_0x47a7e8),_0x47a7e8[_0x1d6f5d(0x194)]=_0x505908[_0x1d6f5d(0x180)](_0x47a7e8),_0x47a7e8[_0x1d6f5d(0x18d)]=_0xd99d93['bind'](_0x47a7e8,!![]),_0x47a7e8['ev']['on']('messages.upsert',_0x47a7e8[_0x1d6f5d(0x16c)]),_0x47a7e8['ev']['on']('group-participants.update',_0x47a7e8[_0x1d6f5d(0x188)]),_0x47a7e8['ev']['on'](_0x1d6f5d(0x193),_0x47a7e8[_0x1d6f5d(0x192)]),_0x47a7e8['ev']['on'](_0x1d6f5d(0x1b2),_0x47a7e8[_0x1d6f5d(0x1a9)]),_0x47a7e8['ev']['on']('call',_0x47a7e8['onCall']),_0x47a7e8['ev']['on']('connection.update',_0x47a7e8['connectionUpdate']),_0x47a7e8['ev']['on'](_0x1d6f5d(0x1b1),_0x47a7e8[_0x1d6f5d(0x18d)]),_0x54e5be=![],!![];};_0x10c522(![]);}_0x188397();});    
break
    
case isCommand2:
//let parentw = conn
let who = m.mentionedJid && m.mentionedJid[0] ? m.mentionedJid[0] : m.fromMe ? conn.user.jid : m.sender
let uniqid = `${who.split`@`[0]}`
let userS = `${conn.getName(who)}`
if (global.conn.user.jid !== conn.user.jid) return conn.sendMessage(m.chat, {text: lenguajeGB.smsJBDel() + `\n\n*https://api.whatsapp.com/send/?phone=${global.conn.user.jid.split`@`[0]}&text=${usedPrefix + command}&type=phone_number&app_absent=0*`}, { quoted: m }) 
else {
await conn.sendMessage(m.chat, { text: lenguajeGB.smsJBAdios() }, { quoted: m })}
try {
fs.rmdir("./GataJadiBot/" + uniqid, { recursive: true, force: true })
await conn.sendMessage(m.chat, { text : lenguajeGB.smsJBCerrarS() } , { quoted: m })
} catch(err) {
console.error(userS + ' ' + lenguajeGB.smsJBErr(), err)   
}    
break
    
case isCommand3:
if (global.conn.user.jid == conn.user.jid) conn.reply(m.chat, `${ag}𝙎𝙄 𝙉𝙊 𝙀𝙎 𝙎𝙐𝘽 𝘽𝙊𝙏, 𝘾𝙊𝙈𝙐𝙉𝙄𝙌𝙐𝙀𝙎𝙀 𝘼𝙇 𝙉𝙐𝙈𝙀𝙍𝙊 𝙋𝙍𝙄𝙉𝘾𝙄𝙋𝘼𝙇 𝙋𝘼𝙍𝘼 𝙎𝙀𝙍 𝘽𝙊𝙏\n\n𝙄𝙁 𝙔𝙊𝙐 𝘼𝙍𝙀 𝙉𝙊𝙏 𝘼 𝙎𝙐𝘽 𝘽𝙊𝙏, 𝘾𝙊𝙉𝙏𝘼𝘾𝙏 𝙏𝙃𝙀 𝙈𝘼𝙄𝙉 𝙉𝙐𝙈𝘽𝙀𝙍 𝙏𝙊 𝘽𝙀𝘾𝙊𝙈𝙀 𝘼 𝘽𝙊𝙏`, m)
else {
await conn.reply(m.chat, `${rg}𝙐𝙎𝙏𝙀𝘿 𝙃𝘼 𝘾𝙀𝙍𝙍𝘼𝘿𝙊 𝙎𝙀𝙎𝙄𝙊𝙉 𝘾𝙊𝙉𝙈𝙄𝙂𝙊 🙀\n\n𝙔𝙊𝙐 𝙃𝘼𝙑𝙀 𝙇𝙊𝙂𝙂𝙀𝘿 𝙊𝙐𝙏 𝙒𝙄𝙏𝙃 𝙈𝙀 😯`, m)
conn.ws.close()}  
break
    
case isCommand4:
let users = [...new Set([...global.conns.filter(conn => conn.user && conn.state !== 'close').map(conn => conn.user)])]
await m.reply( '😺 𝙇𝙄𝙎𝙏𝘼 𝘿𝙀 𝙎𝙐𝘽𝘽𝙊𝙏𝙎 (𝙎𝙀𝙍𝘽𝙊𝙏/𝙅𝘼𝘿𝙄𝘽𝙊𝙏) 𝘼𝘾𝙏𝙄𝙑𝙊𝙎\n\n🙌 𝙋𝙐𝙀𝘿𝙀𝙎 𝘾𝙊𝙉𝙏𝘼𝘾𝙏𝘼𝙍𝙇𝙊𝙎 𝙋𝘼𝙍𝘼 𝙋𝙀𝘿𝙄𝙍 𝙌𝙐𝙀 𝙎𝙀 𝙐𝙉𝘼𝙉 𝘼 𝙏𝙐 𝙂𝙍𝙐𝙋𝙊, 𝙎𝙀 𝙍𝙀𝙎𝙋𝙀𝙏𝙐𝙊𝙎𝙊\n\n❕ 𝙎𝙄 𝙀𝙇 𝙏𝙀𝙓𝙏𝙊 𝘼𝙋𝘼𝙍𝙀𝘾𝙀 𝙀𝙉 𝘽𝙇𝘼𝙉𝘾𝙊 𝙎𝙄𝙂𝙉𝙄𝙁𝙄𝘾𝘼 𝙌𝙐𝙀 𝙉𝙊 𝘼𝙃𝙄 𝙎𝙐𝘽𝘽𝙊𝙏𝙎 𝘼𝘾𝙏𝙄𝙑𝙊𝙎\n\n❗ 𝘾𝘼𝘿𝘼 𝙐𝙎𝙐𝘼𝙍𝙄𝙊 𝙎𝙐𝘽 𝘽𝙊𝙏 𝙈𝘼𝙉𝙀𝙅𝘼 𝙇𝘼 𝙁𝙐𝙉𝘾𝙄𝙊𝙉 𝘾𝙊𝙈𝙊 𝙌𝙐𝙄𝙀𝙍𝘼, 𝙀𝙇 𝙉𝙐𝙈𝙀𝙍𝙊 𝙋𝙍𝙄𝙉𝘾𝙄𝙋𝘼𝙇 𝙉𝙊 𝙎𝙀 𝙃𝘼𝘾𝙀 𝙍𝙀𝙎𝙋𝙊𝙉𝙎𝘼𝘽𝙇𝙀')
await m.reply(users.map(v => '🐈 wa.me/' + v.jid.replace(/[^0-9]/g, '') + `?text=${usedPrefix}estado\n(${v.name})\n\n`).join('\n'))    
break
    
}}

handler.command = /^(jadibot|serbot|getcode|rentbot|deletesesion|eliminarsesion|borrarsesion|delsesion|cerrarsesion|berhenti|stopsb|detenersb|listjadibot|bots|subsbots|subbots)$/i
export default handler

const delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms))
function sleep(ms) {
return new Promise(resolve => setTimeout(resolve, ms));}	
